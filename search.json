[{"path":"https://mrc-ide.github.io/conan2/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Rich FitzJohn. Author, maintainer. Imperial College Science, Technology Medicine. Copyright holder.","code":""},{"path":"https://mrc-ide.github.io/conan2/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"FitzJohn R (2025). conan2: Conan Librarian. R package version 1.9.104, https://github.com/mrc-ide/conan2.","code":"@Manual{,   title = {conan2: Conan the Librarian},   author = {Rich FitzJohn},   year = {2025},   note = {R package version 1.9.104},   url = {https://github.com/mrc-ide/conan2}, }"},{"path":"https://mrc-ide.github.io/conan2/index.html","id":"conan-","dir":"","previous_headings":"","what":"Conan the Librarian","title":"Conan the Librarian","text":"us, spring. Just wind smells fresh storm package temporary, clean reimplementation conan merge back package complete transition didehpc hipercow. safe install alongside conan","code":""},{"path":"https://mrc-ide.github.io/conan2/index.html","id":"what-is-this","dir":"","previous_headings":"","what":"What is this?","title":"Conan the Librarian","text":"Package installation R double edged sword. one hand, installation pretty easy; especially packages CRAN, users interactively run install.packages(...) good go. Packages typically work well together, means ’s safe (typical) install packages single library, one per user. Things start getting creaky though: install.packages() works well interactively, works poorly programmatically, reliably error fails! makes running script install set packages ahead cluster run problematic. increasingly, users make use packages, created help devtools typically installed via remotes; packages typically breaking changes, users less disciplined updating version numbers. users collection interdependent packages installed via remotes using Remotes: metadata DESCRIPTION, final versions packages installed can unreliable. needs HPC/HTC context slightly different : safe start multiple package installations parallel, e.g., HPC setting; need system installation can reliably performed single job, used tasks launch, knowing won’t modified. want system reliably reconstruct library packages remote machine, based set user installed locally, way accidentally trigger installation point user launched 1,000 jobs parallel. need use libraries user-, project-, machine- scoped; user two different projects isolated, user’s local machine Mac remote machine Linux use different packages, different users don’t interact renv package solves many problems, everyone’s taste; support try work around updating library unexpectedly jobs launch. aim system users can switch different modes package installation (see ) can add new modes become popular/available. mode need able : install set packages library determine library date, even constructed different system force rerunning installation destroy recreate library provide detailed logging debugging information things go wrong offer escape hatch (run script tweak library things go wrong) easily created minimally reproducible examples sets packages create impossible--resolve dependency sets back-ends want support : renv, theoretically meets requirements, little fiddly use practice requires users adapt workflows considerably. pretty fiddly work , might last? script, sort escape hatch user provides script just runs whatever installation approach fancy. pkgdepends, sort metadata format, using pkgdepends try install everything. , might try replicate versions found locally, report differences find , want support able run remotely watch output - reasonable support already old version conan “watcher”; can adapt work shared filesystem also ssh. current version, debugging failed installation (especially pkgdepends solver fails) really hard, need improve: setting bootstrap library ’s easy report back version pkgdepends used remotely vs one debug locally converting conan plain pkgdepends code can get bug reports sorted","code":""},{"path":"https://mrc-ide.github.io/conan2/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Conan the Librarian","text":"install conan:","code":"remotes::install_github(\"mrc-ide/conan\", upgrade = FALSE)"},{"path":"https://mrc-ide.github.io/conan2/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Conan the Librarian","text":"MIT © Imperial College Science, Technology Medicine","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_compare.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare conan installations — conan_compare","title":"Compare conan installations — conan_compare","text":"Compare conan installations.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_compare.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare conan installations — conan_compare","text":"","code":"conan_compare(path_lib, curr = 0, prev = -1)"},{"path":"https://mrc-ide.github.io/conan2/reference/conan_compare.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare conan installations — conan_compare","text":"path_lib Path library compare curr previous installation compare . Can name (see conan_list get names), negative number -n indicates \"n installations ago\" positive number n indicates \"nth installation\". default value 0 corresponds current installation. prev previous installation compare . Can name (see conan_list get names), negative number -n indicates \"n installations ago\" positive number n indicates \"nth installation\". default -1 indicates previous installation. Must refer installation curr. Use NULL -Inf want compare empty installation.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_compare.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare conan installations — conan_compare","text":"object class conan_compare, can printed nicely.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_configure.html","id":null,"dir":"Reference","previous_headings":"","what":"Configuration for conan — conan_configure","title":"Configuration for conan — conan_configure","text":"Configuration running conan. common options specific different provisioning methods.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_configure.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Configuration for conan — conan_configure","text":"","code":"conan_configure(   method,   ...,   path_lib,   path_bootstrap,   cran = NULL,   delete_first = FALSE,   path = \".\",   envvars = NULL )"},{"path":"https://mrc-ide.github.io/conan2/reference/conan_configure.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Configuration for conan — conan_configure","text":"method method use; currently script, pkgdepends, auto renv supported. ... Additional arguments, method specific. See Details. path_lib library install . absolute relative path. path_bootstrap path bootstrap library use. needs contain packages required method using. script just remotes, pkgdepends must contain full recursive dependencies pkgdepends. cran URL use CRAN repo. given use RStudio CRAN mirror.  option effect using renv, URLs lock file determine locations packages fetched .  intended use option CRAN repo misbehaving (e.g., returning 500 errors, invalid/incomplete/date index).  likely alternative version use cran = \"https://cran.r-project.org\" delete_first delete library installing ? path Path root run conan ; typically path root project, often working directory. envvars Environment variables set running installation.  See Details format.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_configure.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Configuration for conan — conan_configure","text":"list class conan_config. modify object.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_configure.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Configuration for conan — conan_configure","text":"Different methods support different additional arguments: method script supports argument script, name script run, defaults \"provision.R\" method pkgdepends supports arguments filename, can filename input data,refs, can character vector references (rather reading file pkgdepends.txt file referred filename), policy passed pkgdepends::new_pkg_installation_proposal(). method auto takes argument environment contains list packages install source files scan dependencies. method renv takes arguments. Setting environment variables running installation comes via envvars argument; system designed play well hipercow, though require .  expect data.frame columns name, value (optionally) secret.  secret given, must logical value indicating value encrypted rsa public key.  secret TRUE, envvvars must also attribute key contains path private rsa key decrypt secrets (.e., attr(envvars, \"key\")).  use secret environment variables, openssl package must present conan's bootstrap.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_describe.html","id":null,"dir":"Reference","previous_headings":"","what":"Describe a library — conan_describe","title":"Describe a library — conan_describe","text":"Describe library.  creates summary version information library.  may slightly slow network filesystems large libraries.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_describe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Describe a library — conan_describe","text":"","code":"conan_describe(path_lib)"},{"path":"https://mrc-ide.github.io/conan2/reference/conan_describe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Describe a library — conan_describe","text":"path_lib Path library","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_describe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Describe a library — conan_describe","text":"list class conan_describe. write tooling work soon!","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Test if a conan installation is current — conan_list","title":"Test if a conan installation is current — conan_list","text":"List conan installations, optionally test current.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test if a conan installation is current — conan_list","text":"","code":"conan_list(path_lib, hash = NULL)"},{"path":"https://mrc-ide.github.io/conan2/reference/conan_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test if a conan installation is current — conan_list","text":"path_lib Path library compare hash hash compare; given (NULL) highlight installations match hash.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test if a conan installation is current — conan_list","text":"data.frame columns: name: name installation. might useful conan_compare time: time installation started hash: installation hash method: method used installation args: arguments installation (list column) current: Matches hash passed argument hash object also class conan_list prints nicely, can drop .data.frame.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_run.html","id":null,"dir":"Reference","previous_headings":"","what":"Run a conan installation — conan_run","title":"Run a conan installation — conan_run","text":"Run conan installation, another process, blocking process.","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_run.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run a conan installation — conan_run","text":"","code":"conan_run(config, show_log = TRUE)"},{"path":"https://mrc-ide.github.io/conan2/reference/conan_run.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run a conan installation — conan_run","text":"config Conan config, conan_configure() show_log Show output running script (passed callr::rscript show)","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_run.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run a conan installation — conan_run","text":"Nothing","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_write.html","id":null,"dir":"Reference","previous_headings":"","what":"Write conan installation script — conan_write","title":"Write conan installation script — conan_write","text":"Write conan installation script","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_write.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write conan installation script — conan_write","text":"","code":"conan_write(config, path)"},{"path":"https://mrc-ide.github.io/conan2/reference/conan_write.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write conan installation script — conan_write","text":"config Conan config, conan_configure() path path write ","code":""},{"path":"https://mrc-ide.github.io/conan2/reference/conan_write.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write conan installation script — conan_write","text":"Nothing","code":""}]
